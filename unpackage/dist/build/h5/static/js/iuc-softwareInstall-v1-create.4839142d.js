(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["iuc-softwareInstall-v1-create"],{"09be":function(t,e,i){var a=i("5ce6");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=i("4f06").default;n("5b8eec7e",a,!0,{sourceMap:!1,shadowMode:!1})},"13ce":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{attrs:{id:"software-install-create"}},[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:"/iuc/softwareInstall/v1/list"}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("软件安装申请表")])],2),i("v-uni-form",[i("v-uni-view",{staticClass:"cu-steps margin-top"},t._l(t.steps,function(e,a){return i("v-uni-view",{key:e.id,staticClass:"cu-item",class:e.id<t.model.State?"text-blue":""},[i("v-uni-text",{staticClass:"num",attrs:{"data-index":a+1}}),t._v(t._s(e.name))],1)}),1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("申请人")]),i("v-uni-input",{attrs:{disabled:"true",name:"input",value:t.model.Owner}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("联系方式")]),i("v-uni-input",{attrs:{disabled:"true",name:"input",value:t.model.Telephone}}),i("v-uni-view",{staticClass:"cu-capsule radius"},[i("v-uni-view",{staticClass:"cu-tag bg-blue "},[t._v("+86")]),i("v-uni-view",{staticClass:"cu-tag line-blue"},[t._v("中国大陆")])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("所属部门")]),i("v-uni-input",{attrs:{disabled:"true",value:t.model.BelongDepart}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("申请时间")]),i("v-uni-input",{attrs:{disabled:"true",value:t.model.CreatedTime}})],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("选择实验室")]),i("v-uni-picker",{attrs:{mode:"multiSelector",range:[t.buildings,t.rooms],"range-key":"Name"},on:{columnchange:function(e){e=t.$handleEvent(e),t.columnChange(e)},change:function(e){e=t.$handleEvent(e),t.selectRoom(e)}},model:{value:t.roomIndex,callback:function(e){t.roomIndex=e},expression:"roomIndex"}},[i("v-uni-view",{staticClass:"picker"},[t._v(t._s(t.roomName))])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("待装软件"),i("span",{staticClass:"must"},[t._v("*")])]),i("v-uni-input",{attrs:{placeholder:"(必填)请填写软件的名称"},model:{value:t.model.ApplicationName,callback:function(e){t.$set(t.model,"ApplicationName",e)},expression:"model.ApplicationName"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("软件版本")]),i("v-uni-input",{attrs:{placeholder:"(可选)请填写需要安装的软件版本"},model:{value:t.model.Version,callback:function(e){t.$set(t.model,"Version",e)},expression:"model.Version"}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("下载地址")]),i("v-uni-input",{attrs:{placeholder:"(可选)请填写软件的下载地址"},model:{value:t.model.Download,callback:function(e){t.$set(t.model,"Download",e)},expression:"model.Download"}})],1),i("v-uni-view",{staticClass:"padding flex flex-direction"},[i("v-uni-button",{staticClass:"cu-btn bg-green lg",attrs:{disabled:t.isloading},on:{click:function(e){e=t.$handleEvent(e),t.submit()}}},[t._v("提交")])],1)],1)],1)},n=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return n})},"1a58":function(t,e,i){"use strict";var a=i("09be"),n=i.n(a);n.a},"47f3":function(t,e,i){"use strict";i.r(e);var a=i("dbe4"),n=i.n(a);for(var s in a)"default"!==s&&function(t){i.d(e,t,function(){return a[t]})}(s);e["default"]=n.a},"5ce6":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"#software-install-create .title[data-v-41f696b3]{width:6em;text-align:justify}",""])},"5f09":function(t,e,i){"use strict";var a=[{id:0,name:"填写申请表",FinalState:"",err:""},{id:1,name:"分配经办人",FinalState:"",err:""},{id:2,name:"正在安装中",FinalState:"",err:""},{id:3,name:"等待确认中",FinalState:"",err:""}];t.exports=a},"61fd":function(t,e,i){"use strict";i.r(e);var a=i("13ce"),n=i("47f3");for(var s in n)"default"!==s&&function(t){i.d(e,t,function(){return n[t]})}(s);i("1a58");var l=i("2877"),o=Object(l["a"])(n["default"],a["a"],a["b"],!1,null,"41f696b3",null);e["default"]=o.exports},dbe4:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;i("6faa");var a="00000000-0000-0000-0000-000000000000",n=i("5f09"),s={methods:{submit:function(){var t=this;this.model.RoomId!==a?this.model.ApplicationName?(this.isloading=!0,uni.post("/api/installApp/v1/CreateApplication",this.model,function(e){t.isloading=!1,uni.navigateTo({url:"/iuc/softwareInstall/v1/list"})})):alert("必须填写待装软件的名称"):alert("必须选择实验室")},columnChange:function(t){var e=t.detail.column,i=t.detail.value;if(!e){var a=this.buildings[i].ID;this.rooms=this.allRooms.filter(function(t){return t.BuildingId===a})}},selectRoom:function(t){var e=t.detail.value[1],i=this.rooms[e];this.roomName=i.ID===a?"选择实验室":"".concat(i.Building.Name," ").concat(i.Name),this.model.RoomId=i.ID},goBack:function(){uni.navigateTo({url:"/iuc/softwareInstall/v1/list"})}},data:function(){return{isloading:!1,model:{},roomName:"",buildings:[{ID:a,Name:"置空"}],rooms:[{ID:a,Name:"置空"}],roomIndex:[0,0],allRoom:[],steps:n}},onLoad:function(t){var e=this,i=t.id||null;uni.get("/api/installApp/v1/GetApplication",{id:i},function(t){t.success&&(e.model=t.data,e.buildings=t.buildings,e.allRooms=t.rooms,e.roomName="暂无设置"===t.data.RoomName?"选择实验室":t.data.RoomName)})}};e.default=s}}]);