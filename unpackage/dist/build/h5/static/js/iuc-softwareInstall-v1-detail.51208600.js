(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["iuc-softwareInstall-v1-detail"],{"06ac":function(t,e,i){e=t.exports=i("2350")(!1),e.push([t.i,"#application-detail uni-view .title[data-v-8d1a6402]{width:6em}",""])},"0ada":function(t,e,i){var a=i("06ac");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var s=i("4f06").default;s("2e6ce6df",a,!0,{sourceMap:!1,shadowMode:!1})},"1c69":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{attrs:{id:"application-detail"}},[i("cu-custom",{attrs:{bgColor:"bg-gradual-blue",isBack:"/iuc/softwareInstall/v1/list"}},[i("template",{attrs:{slot:"backText"},slot:"backText"},[t._v("返回")]),i("template",{attrs:{slot:"content"},slot:"content"},[t._v("软件安装申请表")])],2),i("stepInfo",{model:{value:t.model,callback:function(e){t.model=e},expression:"model"}}),i("v-uni-view",{staticClass:"action-list cu-list grid col-2 margin-top"},[i("v-uni-view",{staticClass:"cu-item",on:{click:function(e){e=t.$handleEvent(e),t.changeState()}}},[i("v-uni-view",{staticClass:"text-blue",class:"detail"===t.state?"cuIcon-timefill":"cuIcon-form"}),i("v-uni-text",[t._v(t._s("detail"===t.state?"流程跟踪":"查看申请表"))])],1),t.currentStep.completed||!t.isAdmin&&!t.isMyStep?t._e():i("v-uni-view",{staticClass:"cu-item",on:{click:function(e){e=t.$handleEvent(e),t.exeStep()}}},[i("v-uni-view",{staticClass:"cuIcon-qrcode text-blue"}),i("v-uni-text",[t._v("执行步骤")])],1)],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"detail"===t.state,expression:"state === 'detail'"}],staticClass:"margin-tb"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("申请人")]),i("v-uni-input",{attrs:{value:t.model.Owner,disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("联系方式")]),i("v-uni-input",{attrs:{value:t.model.Telephone,disabled:""}}),i("v-uni-view",{staticClass:"cu-capsule radius"},[i("v-uni-view",{staticClass:"cu-tag bg-blue "},[t._v("+86")]),i("v-uni-view",{staticClass:"cu-tag line-blue"},[t._v("中国大陆")])],1)],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("所属部门")]),i("v-uni-input",{attrs:{value:t.model.BelongDepart,disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("申请时间")]),i("v-uni-input",{attrs:{disabled:"true",value:t.model.CreatedTime}})],1),i("v-uni-view",{staticClass:"cu-form-group margin-top"},[i("v-uni-view",{staticClass:"title"},[t._v("选择实验室")]),i("v-uni-input",{attrs:{value:t.model.RoomName,disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("待装软件")]),i("v-uni-input",{attrs:{value:t.model.ApplicationName,disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("软件版本")]),i("v-uni-input",{attrs:{value:t.model.Version||"未设置",disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("下载地址")]),i("v-uni-input",{attrs:{value:t.model.Download||"未设置",disabled:""}})],1),t.model.ReviewOpinion?i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("安装人")]),i("v-uni-input",{attrs:{value:t.model.HandlerName||"未设置",disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("维修部意见")]),i("v-uni-input",{attrs:{value:t.model.ReviewOpinion||"未设置",disabled:""}})],1)],1):t._e(),t.model.HandleOpinion?i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("安装意见")]),i("v-uni-input",{attrs:{value:t.model.HandleOpinion||"未设置",disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("安装时间")]),i("v-uni-input",{attrs:{value:t.model.HandleTime||"未设置",disabled:""}})],1)],1):t._e(),t.model.CheckOpinion?i("v-uni-view",{staticClass:"margin-top"},[i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("确认人")]),i("v-uni-input",{attrs:{value:t.model.Checker||"未设置",disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("确认意见")]),i("v-uni-input",{attrs:{value:t.model.CheckOpinion||"未设置",disabled:""}})],1),i("v-uni-view",{staticClass:"cu-form-group"},[i("v-uni-view",{staticClass:"title"},[t._v("确认时间")]),i("v-uni-input",{attrs:{value:t.model.CheckTime||"未设置",disabled:""}})],1)],1):t._e()],1),i("v-uni-view",{directives:[{name:"show",rawName:"v-show",value:"timeline"===t.state,expression:"state === 'timeline'"}],staticClass:"margin-top"},t._l(t.timeline,function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-timeline"},[i("v-uni-view",{staticClass:"cu-time"},[t._v(t._s(e.Key))]),t._l(e.steps,function(e,a){return i("v-uni-view",{key:a,staticClass:"cu-item",class:"text-"+t.stepColor[e.State]},[i("v-uni-view",{staticClass:"content"},[i("v-uni-view",{staticClass:"cu-capsule radius"},[i("v-uni-view",{staticClass:"cu-tag",class:"bg-"+t.stepColor[e.State]},[t._v(t._s(e.ExecutorName)+t._s(t.stepInfo[e.State]))]),i("v-uni-view",{staticClass:"cu-tag",class:"line-"+t.stepColor[e.State]},[t._v(t._s(e.Time))])],1),i("v-uni-view",{staticClass:"margin-top"},[t._v(t._s(e.StepName))]),i("v-uni-view",{staticClass:"text-grey text-sm margin-top"},[t.InStep([0,1],e.State)?[t._v(t._s(e.ExecutorName?e.ExecutorName+" 正在进行中":"正在等待接手"))]:[t._v("由"+t._s(e.Operator)+"于"+t._s(e.CreatedOn)+"完成")]],2)],1)],1)})],2)}),1)],1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},"2c7e":function(t,e,i){"use strict";i.r(e);var a=i("1c69"),s=i("c08f");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);i("4a6e");var u=i("2877"),l=Object(u["a"])(s["default"],a["a"],a["b"],!1,null,"8d1a6402",null);e["default"]=l.exports},"4a0e":function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("f499")),n=i("5f09"),u={name:"StepInfo",props:{value:{type:Object,default:function(){}}},data:function(){var t=JSON.parse((0,s.default)(n));return{steps:t,bindSteps:[]}},watch:{value:{deep:!0,immediate:!0,handler:function(t){var e="text-blue",i="err",a=this.steps;a[0].FinalState=t.State>0?e:"",a[0].err="";var s=function(t){return 20===t?e:30===t?"text-red":""};a[1].FinalState=s(t.ReviewState),a[1].err=30===t.ReviewState?i:"",a[2].FinalState=s(t.HandleState),a[2].err=30===t.HandleState?i:"",a[3].FinalState=s(t.CheckState),a[3].err=30===t.CheckState?i:""}}}};e.default=u},"4a6e":function(t,e,i){"use strict";var a=i("0ada"),s=i.n(a);s.a},5033:function(t,e,i){"use strict";i.r(e);var a=i("8474"),s=i("b3c8");for(var n in s)"default"!==n&&function(t){i.d(e,t,function(){return s[t]})}(n);var u=i("2877"),l=Object(u["a"])(s["default"],a["a"],a["b"],!1,null,"5c6f161d",null);e["default"]=l.exports},"5f09":function(t,e,i){"use strict";var a=[{id:0,name:"填写申请表",FinalState:"",err:""},{id:1,name:"分配经办人",FinalState:"",err:""},{id:2,name:"正在安装中",FinalState:"",err:""},{id:3,name:"等待确认中",FinalState:"",err:""}];t.exports=a},8474:function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("v-uni-view",{staticClass:"cu-steps margin-top"},t._l(t.steps,function(e,a){return i("v-uni-view",{key:e.id,staticClass:"cu-item",class:e.FinalState},[i("v-uni-text",{staticClass:"num",class:e.err,attrs:{"data-index":a+1}}),t._v(t._s(e.name))],1)}),1)},s=[];i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s})},b011:function(t,e,i){"use strict";var a=i("288e");Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=a(i("5033")),n="00000000-0000-0000-0000-000000000000",u=i("b716"),l=i("6faa"),r={components:{stepInfo:s.default},onLoad:function(t){this.id=t.id,this.getData()},methods:{getData:function(){var t=this,e=this.id;e&&e!==n?uni.post("/api/installApp/v1/GetApplication",{id:e},function(e){t.model=e.data,t.timeline=e.timeline,t.currentStep=e.currentStep,t.isMyStep=e.currentStep.IsMyStep}):uni.navigateTo({url:"/iuc/softwareInstall/v1/list"})},changeState:function(){this.state="detail"===this.state?"timeline":"detail"},exeStep:function(){console.log(this.currentStep),uni.navigateTo({url:this.currentStep.ToAction})},InStep:function(t,e){var i=e||this.model.State;return t.indexOf(i)>-1}},data:function(){return{id:n,isloading:!1,isAdmin:l.checkPermission("ItemManager.ManageAllSoftwareInstallWorkflow"),isMyStep:!1,model:{},timeline:[],currentStep:{},stepInfo:u.stepInfo,stepColor:["blue","blue","green","green","red"],state:"detail"}}};e.default=r},b3c8:function(t,e,i){"use strict";i.r(e);var a=i("4a0e"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a},b716:function(t,e,i){"use strict";var a={workflow:{0:"申请中",10:"待分配",20:"安装中",30:"待确认",40:"已完成",50:"已取消"},workflowColor:{0:"blue",10:"blue",20:"blue",30:"blue",40:"green",50:"red"},bussiness:{0:"未开始",10:"进行中",20:"已完成",30:"已取消"},stepInfo:{0:"准备中",1:"进行中",2:"已执行",3:"已完成",4:"已取消"}};t.exports=a},c08f:function(t,e,i){"use strict";i.r(e);var a=i("b011"),s=i.n(a);for(var n in a)"default"!==n&&function(t){i.d(e,t,function(){return a[t]})}(n);e["default"]=s.a}}]);